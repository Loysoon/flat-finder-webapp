<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flat Finder - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        .filter-group {
            margin-bottom: 20px;
        }
        .filter-group h3 {
            margin-bottom: 10px;
            color: var(--tg-theme-text-color, #000000);
        }
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .filter-option {
            padding: 8px 16px;
            border: 1px solid var(--tg-theme-button-color, #2481cc);
            border-radius: 8px;
            background: transparent;
            color: var(--tg-theme-button-color, #2481cc);
            cursor: pointer;
            transition: all 0.2s;
        }
        .filter-option.selected {
            background: var(--tg-theme-button-color, #2481cc);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        .price-inputs, .metro-inputs, .area-inputs, .floor-inputs {
            display: flex;
            gap: 10px;
        }
        .price-inputs input, .metro-inputs input, .area-inputs input, .floor-inputs input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--tg-theme-hint-color, #999999);
            border-radius: 8px;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--tg-theme-button-color, #2481cc);
        }
        .checkbox-group label {
            cursor: pointer;
        }
        .toggle-option {
            padding: 8px 16px;
            border: 1px solid var(--tg-theme-button-color, #2481cc);
            border-radius: 8px;
            background: transparent;
            color: var(--tg-theme-button-color, #2481cc);
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 8px;
        }
        .toggle-option.selected {
            background: var(--tg-theme-button-color, #2481cc);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        .district-section {
            margin-top: 10px;
            padding-left: 15px;
            border-left: 2px solid var(--tg-theme-hint-color, #999999);
        }
        .district-section h4 {
            margin: 10px 0 5px 0;
            font-size: 14px;
            color: var(--tg-theme-hint-color, #999999);
        }
        .save-btn {
            width: 100%;
            padding: 12px;
            background: var(--tg-theme-button-color, #2481cc);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        .save-btn:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤</h2>
        
        <div class="filter-group">
            <h3>üè† –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç</h3>
            <div class="filter-options" id="rooms">
                <button class="filter-option" data-value="studio">–°—Ç—É–¥–∏—è</button>
                <button class="filter-option" data-value="1">1</button>
                <button class="filter-option" data-value="2">2</button>
                <button class="filter-option" data-value="3">3</button>
                <button class="filter-option" data-value="4">4</button>
                <button class="filter-option" data-value="5">5</button>
                <button class="filter-option" data-value="6">6</button>
                <button class="filter-option" data-value="free">–°–≤–æ–±–æ–¥–Ω–∞—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞</button>
            </div>
        </div>

        <div class="filter-group">
            <h3>üí∞ –¶–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω</h3>
            <div class="price-inputs">
                <input type="number" id="price-min" placeholder="–û—Ç (—Ä—É–±.)">
                <input type="number" id="price-max" placeholder="–î–æ (—Ä—É–±.)">
            </div>
        </div>

        <div class="filter-group">
            <h3>üë§ –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫</h3>
            <button class="toggle-option" id="owner-only" data-value="owner">üë§ –¢–æ–ª—å–∫–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫</button>
        </div>

        <div class="filter-group">
            <h3>üöá –í—Ä–µ–º—è –¥–æ –º–µ—Ç—Ä–æ</h3>
            <div class="metro-inputs">
                <input type="number" id="metro-time" placeholder="–í—Ä–µ–º—è (–º–∏–Ω)">
                <div class="filter-options" id="metro-transport">
                    <button class="filter-option" data-value="walk">üö∂ –ü–µ—à–∫–æ–º</button>
                    <button class="filter-option" data-value="transport">üöå –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</button>
                </div>
            </div>
        </div>

        <div class="filter-group">
            <h3>üìç –û–∫—Ä—É–≥–∞ –∏ —Ä–∞–π–æ–Ω—ã –ú–æ—Å–∫–≤—ã</h3>
            <div class="filter-options" id="districts">
                <button class="filter-option" data-value="–¶–ê–û">–¶–ê–û</button>
                <button class="filter-option" data-value="–°–ê–û">–°–ê–û</button>
                <button class="filter-option" data-value="–°–í–ê–û">–°–í–ê–û</button>
                <button class="filter-option" data-value="–í–ê–û">–í–ê–û</button>
                <button class="filter-option" data-value="–Æ–í–ê–û">–Æ–í–ê–û</button>
                <button class="filter-option" data-value="–Æ–ê–û">–Æ–ê–û</button>
                <button class="filter-option" data-value="–Æ–ó–ê–û">–Æ–ó–ê–û</button>
                <button class="filter-option" data-value="–ó–ê–û">–ó–ê–û</button>
                <button class="filter-option" data-value="–°–ó–ê–û">–°–ó–ê–û</button>
                <button class="filter-option" data-value="–ù–ê–û">–ù–ê–û</button>
                <button class="filter-option" data-value="–¢–ê–û">–¢–ê–û</button>
            </div>
            <div class="district-section">
                <h4>–†–∞–π–æ–Ω—ã –¶–ê–û</h4>
                <div class="filter-options" id="districts-cao">
                    <button class="filter-option" data-value="–ê—Ä–±–∞—Ç">–ê—Ä–±–∞—Ç</button>
                    <button class="filter-option" data-value="–ë–∞—Å–º–∞–Ω–Ω—ã–π">–ë–∞—Å–º–∞–Ω–Ω—ã–π</button>
                    <button class="filter-option" data-value="–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—á—å–µ">–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—á—å–µ</button>
                    <button class="filter-option" data-value="–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∏–π">–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ú–µ—â–∞–Ω—Å–∫–∏–π">–ú–µ—â–∞–Ω—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ü—Ä–µ—Å–Ω–µ–Ω—Å–∫–∏–π">–ü—Ä–µ—Å–Ω–µ–Ω—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–¢–∞–≥–∞–Ω—Å–∫–∏–π">–¢–∞–≥–∞–Ω—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–¢–≤–µ—Ä—Å–∫–æ–π">–¢–≤–µ—Ä—Å–∫–æ–π</button>
                    <button class="filter-option" data-value="–•–∞–º–æ–≤–Ω–∏–∫–∏">–•–∞–º–æ–≤–Ω–∏–∫–∏</button>
                    <button class="filter-option" data-value="–Ø–∫–∏–º–∞–Ω–∫–∞">–Ø–∫–∏–º–∞–Ω–∫–∞</button>
                </div>
                <h4>–†–∞–π–æ–Ω—ã –°–ê–û</h4>
                <div class="filter-options" id="districts-sao">
                    <button class="filter-option" data-value="–ê—ç—Ä–æ–ø–æ—Ä—Ç">–ê—ç—Ä–æ–ø–æ—Ä—Ç</button>
                    <button class="filter-option" data-value="–ë–µ–≥–æ–≤–æ–π">–ë–µ–≥–æ–≤–æ–π</button>
                    <button class="filter-option" data-value="–ë–µ—Å–∫—É–¥–Ω–∏–∫–æ–≤—Å–∫–∏–π">–ë–µ—Å–∫—É–¥–Ω–∏–∫–æ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–í–æ–π–∫–æ–≤—Å–∫–∏–π">–í–æ–π–∫–æ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–í–æ—Å—Ç–æ—á–Ω–æ–µ –î–µ–≥—É–Ω–∏–Ω–æ">–í–æ—Å—Ç–æ—á–Ω–æ–µ –î–µ–≥—É–Ω–∏–Ω–æ</button>
                    <button class="filter-option" data-value="–ì–æ–ª–æ–≤–∏–Ω—Å–∫–∏–π">–ì–æ–ª–æ–≤–∏–Ω—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–î–º–∏—Ç—Ä–æ–≤—Å–∫–∏–π">–î–º–∏—Ç—Ä–æ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ó–∞–ø–∞–¥–Ω–æ–µ –î–µ–≥—É–Ω–∏–Ω–æ">–ó–∞–ø–∞–¥–Ω–æ–µ –î–µ–≥—É–Ω–∏–Ω–æ</button>
                    <button class="filter-option" data-value="–ö–æ–ø—Ç–µ–≤–æ">–ö–æ–ø—Ç–µ–≤–æ</button>
                    <button class="filter-option" data-value="–õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π">–õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π</button>
                    <button class="filter-option" data-value="–ú–æ–ª–∂–∞–Ω–∏–Ω–æ–≤—Å–∫–∏–π">–ú–æ–ª–∂–∞–Ω–∏–Ω–æ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–°–∞–≤—ë–ª–æ–≤—Å–∫–∏–π">–°–∞–≤—ë–ª–æ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–°–æ–∫–æ–ª">–°–æ–∫–æ–ª</button>
                    <button class="filter-option" data-value="–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∏–π">–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–•–æ–≤—Ä–∏–Ω–æ">–•–æ–≤—Ä–∏–Ω–æ</button>
                    <button class="filter-option" data-value="–•–æ—Ä–æ—à—ë–≤—Å–∫–∏–π">–•–æ—Ä–æ—à—ë–≤—Å–∫–∏–π</button>
                </div>
                <h4>–†–∞–π–æ–Ω—ã –°–í–ê–û</h4>
                <div class="filter-options" id="districts-svao">
                    <button class="filter-option" data-value="–ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∏–π">–ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ê–ª—Ç—É—Ñ—å–µ–≤—Å–∫–∏–π">–ê–ª—Ç—É—Ñ—å–µ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ë–∞–±—É—à–∫–∏–Ω—Å–∫–∏–π">–ë–∞–±—É—à–∫–∏–Ω—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ë–∏–±–∏—Ä–µ–≤–æ">–ë–∏–±–∏—Ä–µ–≤–æ</button>
                    <button class="filter-option" data-value="–ë—É—Ç—ã—Ä—Å–∫–∏–π">–ë—É—Ç—ã—Ä—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–õ–∏–∞–Ω–æ–∑–æ–≤–æ">–õ–∏–∞–Ω–æ–∑–æ–≤–æ</button>
                    <button class="filter-option" data-value="–õ–æ—Å–∏–Ω–æ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π">–õ–æ—Å–∏–Ω–æ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–ú–∞—Ä—Ñ–∏–Ω–æ">–ú–∞—Ä—Ñ–∏–Ω–æ</button>
                    <button class="filter-option" data-value="–ú–∞—Ä—å–∏–Ω–∞ —Ä–æ—â–∞">–ú–∞—Ä—å–∏–Ω–∞ —Ä–æ—â–∞</button>
                    <button class="filter-option" data-value="–û—Å—Ç–∞–Ω–∫–∏–Ω—Å–∫–∏–π">–û—Å—Ç–∞–Ω–∫–∏–Ω—Å–∫–∏–π</button>
                    <button class="filter-option" data-value="–û—Ç—Ä–∞–¥–Ω–æ–µ">–û—Ç—Ä–∞–¥–Ω–æ–µ</button>
                    <button class="filter-option" data-value="–†–æ—Å—Ç–æ–∫–∏–Ω–æ">–†–æ—Å—Ç–æ–∫–∏–Ω–æ</button>
                    <button class="filter-option" data-value="–°–≤–∏–±–ª–æ–≤–æ">–°–≤–∏–±–ª–æ–≤–æ</button>
                    <button class="filter-option" data-value="–°–µ–≤–µ—Ä–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ">–°–µ–≤–µ—Ä–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ</button>
                    <button class="filter-option" data-value="–°–µ–≤–µ—Ä–Ω—ã–π">–°–µ–≤–µ—Ä–Ω—ã–π</button>
                    <button class="filter-option" data-value="–Æ–∂–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ">–Æ–∂–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ</button>
                    <button class="filter-option" data-value="–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∏–π">–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∏–π</button>
                </div>
            </div>
        </div>

        <div class="filter-group">
            <h3>üõã –£–¥–æ–±—Å—Ç–≤–∞</h3>
            <div class="filter-options" id="amenities">
                <button class="filter-option" data-value="conditioner">üå°Ô∏è –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä</button>
                <button class="filter-option" data-value="rfgr">üßä –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</button>
                <button class="filter-option" data-value="dishwasher">üçΩÔ∏è –ü–æ—Å—É–¥–æ–º–æ–π–∫–∞</button>
                <button class="filter-option" data-value="wm">üëï –°—Ç–∏—Ä–∞–ª–∫–∞</button>
                <button class="filter-option" data-value="internet">üåê –ò–Ω—Ç–µ—Ä–Ω–µ—Ç</button>
                <button class="filter-option" data-value="tv">üì∫ –¢–µ–ª–µ–≤–∏–∑–æ—Ä</button>
            </div>
        </div>

        <div class="filter-group">
            <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –£—Å–ª–æ–≤–∏—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è</h3>
            <button class="toggle-option" id="with-children" data-value="children">üë∂ –ú–æ–∂–Ω–æ —Å –¥–µ—Ç—å–º–∏</button>
            <button class="toggle-option" id="with-pets" data-value="pets">üêï –ú–æ–∂–Ω–æ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏</button>
        </div>

        <div class="filter-group">
            <h3>üìê –ü–ª–æ—â–∞–¥—å</h3>
            <div class="area-inputs">
                <input type="number" id="area-min" placeholder="–û—Ç (–º¬≤)">
            </div>
        </div>

        <div class="filter-group">
            <h3>üè¢ –≠—Ç–∞–∂</h3>
            <div class="floor-inputs">
                <input type="number" id="floor-min" placeholder="–û—Ç">
                <input type="number" id="floor-max" placeholder="–î–æ">
            </div>
            <button class="toggle-option" id="not-last-floor" data-value="not-last-floor">üè¢ –ù–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç—Ç–∞–∂</button>
        </div>

        <button class="save-btn" onclick="saveFilters()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –î–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        let filters = {
            rooms: [],
            priceMin: null,
            priceMax: null,
            ownerOnly: false,
            metroTime: null,
            metroTransport: null,
            districts: [],
            amenities: [],
            withChildren: false,
            withPets: false,
            areaMin: null,
            floorMin: null,
            floorMax: null,
            notLastFloor: false
        };

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–º–Ω–∞—Ç (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
        document.querySelectorAll('#rooms .filter-option').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                if (this.classList.contains('selected')) {
                    filters.rooms.push(this.dataset.value);
                } else {
                    filters.rooms = filters.rooms.filter(r => r !== this.dataset.value);
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ–∫—Ä—É–≥–æ–≤ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
        document.querySelectorAll('#districts .filter-option').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                if (this.classList.contains('selected')) {
                    filters.districts.push(this.dataset.value);
                } else {
                    filters.districts = filters.districts.filter(d => d !== this.dataset.value);
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–π–æ–Ω–æ–≤ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
        document.querySelectorAll('.district-section .filter-option').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                if (this.classList.contains('selected')) {
                    filters.districts.push(this.dataset.value);
                } else {
                    filters.districts = filters.districts.filter(d => d !== this.dataset.value);
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –¥–æ –º–µ—Ç—Ä–æ (–æ–¥–∏–Ω –≤—ã–±–æ—Ä)
        document.querySelectorAll('#metro-transport .filter-option').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('#metro-transport .filter-option').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                filters.metroTransport = this.dataset.value;
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
        document.querySelectorAll('#amenities .filter-option').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                if (this.classList.contains('selected')) {
                    filters.amenities.push(this.dataset.value);
                } else {
                    filters.amenities = filters.amenities.filter(a => a !== this.dataset.value);
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
        document.getElementById('price-min').addEventListener('input', function() {
            filters.priceMin = this.value;
        });

        document.getElementById('price-max').addEventListener('input', function() {
            filters.priceMax = this.value;
        });

        document.getElementById('metro-time').addEventListener('input', function() {
            filters.metroTime = this.value;
        });

        document.getElementById('area-min').addEventListener('input', function() {
            filters.areaMin = this.value;
        });

        document.getElementById('floor-min').addEventListener('input', function() {
            filters.floorMin = this.value;
        });

        document.getElementById('floor-max').addEventListener('input', function() {
            filters.floorMax = this.value;
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫-–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
        document.getElementById('owner-only').addEventListener('click', function() {
            this.classList.toggle('selected');
            filters.ownerOnly = this.classList.contains('selected');
        });

        document.getElementById('with-children').addEventListener('click', function() {
            this.classList.toggle('selected');
            filters.withChildren = this.classList.contains('selected');
        });

        document.getElementById('with-pets').addEventListener('click', function() {
            this.classList.toggle('selected');
            filters.withPets = this.classList.contains('selected');
        });

        document.getElementById('not-last-floor').addEventListener('click', function() {
            this.classList.toggle('selected');
            filters.notLastFloor = this.classList.contains('selected');
        });

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function saveFilters() {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
            tg.sendData(JSON.stringify(filters));
            tg.close();
        }
    </script>
</body>
</html> 